<ct-navbar></ct-navbar>
<!-- <div>
  {{ genre }}
</div>
<div *ngFor='let question of questions'>
  {{ question.question }}
</div> -->
<div class='container-fluid questions-container'>
  <alert *ngIf='successful_alert' type="success">
    <strong>Done!</strong>
  </alert>
  <alert *ngIf='failed_alert' type="danger">
    <strong>Error!</strong>
  </alert>
  <div>
    <h3 class='title--styling'>{{ genre }}</h3>
  </div>
  <div>
    <div class='questions-list' *ngFor='let question of selected_questions; let i = index'>
      <div class='row'>
        <div class='col-sm-8'>
          <div class='questions-list__question'>{{(i+1)+(itemsPerPage*(page-1))}}- {{ question.question }}</div>
        </div>
        <div class='col-sm-4 questions-list__btns'>
          <button type="button" class="btn btn-primary" (click)='openEditModal(editModal, question)'>Edit</button>
          <button type="button" class="btn btn-danger" (click)='openDeleteConfirmationModal(deleteModal, question)'>Delete</button>
        </div>
      </div>
      <div>
        <ol type='a' class='questions-list__options'>
          <li [ngClass]="{'questions-list__correct-answer': question.a == question.correct_answer }">
            {{ question.a }}
          </li>
          <li [ngClass]="{'questions-list__correct-answer': question.b == question.correct_answer }">
            {{ question.b }}
          </li>
          <li [ngClass]="{'questions-list__correct-answer': question.c == question.correct_answer }">
            {{ question.c }}
          </li>
          <li [ngClass]="{'questions-list__correct-answer': question.d == question.correct_answer }">
            {{ question.d }}
          </li>
        </ol>
      </div>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-6 col-md-offset-4 col-sm-6'>
      <pagination class="pagination-lg" [(ngModel)]="page" [totalItems]="length" [itemsPerPage]="itemsPerPage" [maxSize]="maxSize"
        [rotate]="false" (pageChanged)="changePage($event)" (numPages)="numPages = $event">
      </pagination>
    </div>
  </div>
  <!-- <ng-template #deleteModal>
    <div class="modal-body text-center modal-body-enhancements">
      <p>Are you sure you want to delete this question?</p>
      <button type="button" class="btn btn-danger" (click)="confirmDelete()">Yes</button>
      <button type="button" class="btn btn-primary" (click)="declineDelete()">No</button>
    </div>
  </ng-template> -->
  <div bsModal #deleteModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
    <div class='modal-dialog modal-md'>
      <div class="modal-content">
        <div class="modal-body text-center modal-body-enhancements">
          <p>Are you sure you want to delete this question?</p>
          <button type="button" class="btn btn-danger" (click)="confirmDelete()">Yes</button>
          <button type="button" class="btn btn-primary" (click)="close()">No</button>
        </div>
      </div>
    </div>
  </div>
  <div bsModal #editModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
    <div class='modal-dialog modal-lg'>
      <div class="modal-content">
        <div class="modal-body text-center modal-body-enhancements">
          <form #editForm="ngForm" *ngIf='modal_selected_question'>
            <div class="form-group">
              <label for="question">Question</label>
              <input type="text" name="question" class="form-control" id="question" [ngModel]='modal_selected_question.question'>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" value='a' name="correct_answer" [checked]="modal_selected_question.correct_answer === modal_selected_question.a"
                  [ngModel]="correct_answer">A:</label>
              <input type="text" name="a" class="form-control" id="a" [ngModel]='modal_selected_question.a'>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" value='b' name="correct_answer" [checked]="modal_selected_question.correct_answer === modal_selected_question.b"
                  [ngModel]="correct_answer">B:</label>
              <input type="text" name="b" class="form-control" id="b" [ngModel]='modal_selected_question.b'>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" value='c' name="correct_answer" [checked]="modal_selected_question.correct_answer === modal_selected_question.c"
                  [ngModel]="correct_answer">C:</label>
              <input type="text" name="c" class="form-control" id="c" [ngModel]='modal_selected_question.c'>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" value='d' name="correct_answer" [checked]="modal_selected_question.correct_answer === modal_selected_question.d"
                  [ngModel]="correct_answer">D:</label>
              <input type="text" name="d" class="form-control" id="d" [ngModel]='modal_selected_question.d'>
            </div>
            <button type="submit" class="btn btn-success" (click)='confirmEdit(editForm.value)'>Submit</button>
            <button type="submit" class="btn btn-danger" (click)='close()'>Cancel</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>